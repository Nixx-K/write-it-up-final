<nav
  class="navbar navbar-expand-lg mb-4"
  [ngClass]="isDarkMode ? 'navbar-dark bg-dark' : 'navbar-light bg-light'"
>
  <div class="container">
    <a class="navbar-brand d-flex align-items-center gap-2" routerLink="/">
      <img
        src="https://i.postimg.cc/kGnNmgHd/Black-with-Vision-Icon-Internet-Logo-removebg-preview.png"
        alt="logo"
        width="32"
        height="32"
      />
      Write It Up
    </a>

    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarNav"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto align-items-center gap-2">

        <li class="nav-item">
          <a class="nav-link" routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">
            Strona główna
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" routerLink="/ranking" routerLinkActive="active">
            Ranking
          </a>
        </li>

        <li class="nav-item ms-2">
          <button
            class="btn btn-sm btn-outline-secondary"
            (click)="toggleTheme()"
            title="Toggle theme"
          >
            <i
              class="bi"
              [ngClass]="isDarkMode ? 'bi-sun' : 'bi-moon'"
            ></i>
          </button>
        </li>

        <ng-container *ngIf="currentUser$ | async as user; else loginTemplate">
          <li class="nav-item d-flex align-items-center ms-3">
            <span class="navbar-text d-flex align-items-center">
              <img
                [src]="user.avatarUrl"
                class="rounded-circle me-2"
                width="30"
                height="30"
                alt="Avatar"
              />
              {{ user.username }}
            </span>
          </li>

          <li class="nav-item ms-2">
            <button (click)="logout()" class="btn btn-outline-danger btn-sm">
              Wyloguj
            </button>
          </li>
        </ng-container>

        <ng-template #loginTemplate>
          <li class="nav-item">
            <a class="nav-link" routerLink="/login" routerLinkActive="active">
              Zaloguj
            </a>
          </li>
        </ng-template>

      </ul>
    </div>
  </div>
</nav>
